<div class="space-y-8">
  <!-- Filter and Search Section -->
  <div class="bg-white shadow-md rounded-md p-4">
    <h2 class="text-lg font-medium text-gray-800">Filters & Search</h2>
    <div class="flex flex-col space-y-4 mt-3">
      <%# TODO: Figure out how to represent quick filters as a pre-populated search form so there's only one way to do things %>
      <!-- Quick Filters -->
      <div class="flex space-x-4">
        Quick Filters TBD
        <%= link_to 'Reset Filters', visits_path, class: "px-4 py-2 rounded-md text-red-600 hover:text-red-800 hover:underline uppercase tracking-wider font-semibold text-sm" %>
      </div>

      <!-- Search Form -->
      <%= form_with model: @visit_search, url: visits_path, method: :get, local: true, class: "flex items-center space-x-2" do |form| %>
        <%= form.text_field :url, placeholder: "Filter by content", class: "w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none" %>
        <%= form.text_field :referrer, placeholder: "Filter by referrer", class: "w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none" %>
        <%= form.date_field :start_date, placeholder: "Start date", class: "w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none" %>
        <%= form.date_field :end_date, placeholder: "End date", class: "w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none" %>
        <%= form.submit "Search", class: "px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700" %>
      <% end %>
    </div>
  </div>

  <!-- Charts -->
  <div class="space-y-6">
    <!-- Summary Stats -->
    <div class="bg-white shadow-md rounded-md p-4">
      <h2 class="text-lg font-medium text-gray-800">Summary</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-3">
        <% @stats.summary.each do |label, value| %>
          <div class="p-3 bg-gray-100 rounded-md shadow-inner text-center">
            <span class="block text-sm text-gray-500"><%= label.to_s.humanize %></span>
            <span class="block text-lg font-semibold text-gray-800"><%= value %></span>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Individual Charts -->
    <div class="bg-white shadow-md rounded-md p-4">
      <h2 class="text-lg font-medium text-gray-800">Visits by Date</h2>
      <%= line_chart @stats.by_date, id: "by_date", xtitle: "Date", ytitle: "Number of Visits", curve: true, library: { animation: { duration: 1500, easing: 'easeInQuad', delay: 0, loop: false} } %>
    </div>

    <div class="bg-white shadow-md rounded-md p-4">
      <h2 class="text-lg font-medium text-gray-800">Top Pages</h2>
      <%= bar_chart @stats.by_page, id: "by_page", xtitle: "Number of Visits", ytitle: "URL", library: { animation: { duration: 1500, easing: 'easeInQuad', delay: 0, loop: false} } %>
    </div>

    <div class="bg-white shadow-md rounded-md p-4">
      <h2 class="text-lg font-medium text-gray-800">Top Referrers</h2>
      <%= bar_chart @stats.by_referrer, id: "by_referrer", xtitle: "Number of Visits", ytitle: "Referrer", library: { animation: { duration: 1500, easing: 'easeInQuad', delay: 0, loop: false} } %>
    </div>
  </div>
</div>
